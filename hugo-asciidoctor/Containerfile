FROM registry.access.redhat.com/ubi10/ubi-minimal:10.1-1770052085@sha256:380da76bb8a69e333b6c11341d600f5d3aab9ee5b8c95ceb64aae2457f5c1c6e

ARG HUGO_VERSION=0.155.2

RUN microdnf upgrade -y && \
    microdnf install -y rubygems ruby-devel gcc-c++ tar && \
    gem install -N ascii_binder asciidoctor-diagram asciidoctor-html5s rouge && \
    curl -L https://github.com/gohugoio/hugo/releases/download/v${HUGO_VERSION}/hugo_extended_${HUGO_VERSION}_linux-amd64.tar.gz | tar zxvf - -C /bin hugo && \
    hugo version

WORKDIR /blog
EXPOSE 1313
ENTRYPOINT ["hugo"]
CMD ["--logLevel", "info"]
